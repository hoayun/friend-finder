<!DOCTYPE <!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Friend Finder</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
</head>

<body class="bg-dark">
  <div class="container bg-primary rounded">
    <h1 class="text-center">Survey Questions</h1>
    <br>
    <h3 class="text-center">Tell us about yourself</h3>
    <form>

      <div class="form-group">
        <label for="exampleInputEmail1">What's your name?</label>
        <input type="text" class="form-control" id="friendName" aria-describedby="emailHelp">

      </div>
      <div class="form-group">
        <label for="exampleInputPassword1">Link an image of yourself</label>
        <input type="text" class="form-control" id="piclink">
      </div>
      <div class="form-group">
        <label for="exampleFormControlSelect2">How much do you like dogs?</label>
        <select class="form-control" id="q1">
          <option>1</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5</option>
        </select>
      </div>
      <div class="form-group">
        <label for="exampleFormControlSelect2">How much do you like cats?</label>
        <select class="form-control" id="q2">
          <option>1</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5</option>
        </select>
      </div>
      <div class="form-group">
        <label for="exampleFormControlSelect2">How intelligent do you consider yourself to be?</label>
        <select class="form-control" id="q3">
          <option>1</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5</option>
        </select>
      </div>
      <div class="form-group">
        <label for="exampleFormControlSelect2">How often do you read books?</label>
        <select class="form-control" id="q4">
          <option>1</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5</option>
        </select>
      </div>
      <div class="form-group">
        <label for="exampleFormControlSelect2">How often do you play sports?</label>
        <select class="form-control" id="q5">
          <option>1</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5</option>
        </select>
      </div>
      <div class="form-group">
        <label for="exampleFormControlSelect2">You rarely get carried away by fantasies and ideas.</label>
        <select class="form-control" id="q6">
          <option>1</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5</option>
        </select>
      </div>
      <div class="form-group">
        <label for="exampleFormControlSelect2">In a discussion, truth should be more important than people’s
          sensitivities.</label>
        <select class="form-control" id="q7">
          <option>1</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5</option>
        </select>
      </div>
      <div class="form-group">
        <label for="exampleFormControlSelect2">People can rarely upset you.</label>
        <select class="form-control" id="q8">
          <option>1</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5</option>
        </select>
      </div>
      <div class="form-group">
        <label for="exampleFormControlSelect2">You think that everyone’s views should be respected regardless of whether
          they are supported by facts or not.</label>
        <select class="form-control" id="q9">
          <option>1</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5</option>
        </select>
      </div>
      <div class="form-group">
        <label for="exampleFormControlSelect2">You feel more energetic after spending time with a group of
          people.</label>
        <select class="form-control" id="q10">
          <option>1</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5</option>
        </select>
      </div>
      <button type="submit" id="submit" class="btn btn-success " data-toggle="modal"
        data-target=".bd-example-modal-lg">Submit</button>
    </form>
    <div id="myModal" class="modal fade bd-example-modal-lg bg-success" tabindex="-1" role="dialog"
      aria-labelledby="myLargeModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content text-center">
          <h3 id="matchName"></h3>
          <div class="text-center">
          <img src="" id="matchPic" style="max-width: 300px;" style="max-height: 250px;">
          </div>
        </div>

      </div>
    </div>
  </div>
  <footer class="footer">
    <div class="container">
      <p><a href="/api/friends">API Table Link</a>
    </div>
  </footer>

  <script type="text/javascript">
    // In this code below we create the Front-end JavaScript which "POSTS" our form data to our express server.
    // In essence, when the user hits submit, jQuery grabs all of the fields then sends a post request to our api
    // Our api recognizes the route (/api/tables)... and then runs the associated code (found in api-routes.js).
    // In this case the associated code "saves" the data to the friends.js file or waitinglist-data.js file

    $("#submit").on("click", function (event) {
      event.preventDefault();
      if (($("#q1").val()) === "" || ($("#friendName").val()) === "" || ($("#q2").val()) === "" || ($("#q3").val()) === "" || ($("#q4").val()) === "" || ($("#q5").val()) === "" || ($("#q6").val()) === "" || ($("#q7").val()) === "" || ($("#q8").val()) === "" || ($("#q9").val()) === "" || ($("#q10").val()) === "" || ($("#piclink").val()) === "") {
        alert('you did not fill out one of the fields');
        return false;
      }
      else {


        // Here we grab the form elements
        var newfriend = {
          name: $("#friendName").val().trim(),
          photo: $("#piclink").val().trim(),
          scores: [
            $("#q1").val(),
            $("#q2").val(),
            $("#q3").val(),
            $("#q4").val(),
            $("#q5").val(),
            $("#q6").val(),
            $("#q7").val(),
            $("#q8").val(),
            $("#q9").val(),
            $("#q10").val()
          ]

        };

        $.post("/api/friends", newfriend)
          .then(function (data) {
            $("#matchName").text(data.name+" is your best match");
            $("#matchPic").attr("src", data.photo);
           // console.log(data.name);
            $("#friendName").val("");
            $("#piclink").val("");

          })

      }

    })

  </script>
</body>

</html>